import {c as f, a as u, m as I, j as s, L as b, d as F, e as j, A as v, f as N, r as h, $ as m, u as W, o as R, N as T, S as y, p as A, k as D, n as G, q as P} from "./index-91HBn0HY.js";
import {l as Y} from "./index-CUx-uIXr.js";
import {C as _} from "./Card-vMJQD3tz.js";
import U from "./Spinner-tTy3RD8D.js";
import {S as H} from "./search-Rehm3Hck.js";
import {X as O} from "./x-3i2_rhmm.js";
import {H as Z} from "./home-RL_HKN3v.js";
import {F as V} from "./flag-dYW7tF4C.js";
import {L as k} from "./link-l0fRr8Nd.js";
import "./index-A8GsNH3c.js";
import "./index-c6YUY5go.js";
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const X = f("Clapperboard", [["path", {
    d: "M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",
    key: "1tn4o7"
}], ["path", {
    d: "m6.2 5.3 3.1 3.9",
    key: "iuk76l"
}], ["path", {
    d: "m12.4 3.4 3.1 4",
    key: "6hsd6n"
}], ["path", {
    d: "M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",
    key: "ltgou9"
}]]);
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const J = f("ExternalLink", [["path", {
    d: "M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",
    key: "a6xqqp"
}], ["polyline", {
    points: "15 3 21 3 21 9",
    key: "mznyad"
}], ["line", {
    x1: "10",
    x2: "21",
    y1: "14",
    y2: "3",
    key: "18c3s4"
}]]);
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const K = f("Film", [["rect", {
    width: "18",
    height: "18",
    x: "3",
    y: "3",
    rx: "2",
    key: "afitv7"
}], ["path", {
    d: "M7 3v18",
    key: "bbkbws"
}], ["path", {
    d: "M3 7.5h4",
    key: "zfgn84"
}], ["path", {
    d: "M3 12h18",
    key: "1i2n21"
}], ["path", {
    d: "M3 16.5h4",
    key: "1230mu"
}], ["path", {
    d: "M17 3v18",
    key: "in4fa5"
}], ["path", {
    d: "M17 7.5h4",
    key: "myr1c1"
}], ["path", {
    d: "M17 16.5h4",
    key: "go4c1d"
}]]);
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Q = f("Gamepad2", [["line", {
    x1: "6",
    x2: "10",
    y1: "11",
    y2: "11",
    key: "1gktln"
}], ["line", {
    x1: "8",
    x2: "8",
    y1: "9",
    y2: "13",
    key: "qnk9ow"
}], ["line", {
    x1: "15",
    x2: "15.01",
    y1: "12",
    y2: "12",
    key: "krot7o"
}], ["line", {
    x1: "18",
    x2: "18.01",
    y1: "10",
    y2: "10",
    key: "1lcuu1"
}], ["path", {
    d: "M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",
    key: "mfqc10"
}]]);
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ee = f("WifiOff", [["line", {
    x1: "2",
    x2: "22",
    y1: "2",
    y2: "22",
    key: "a6p6uj"
}], ["path", {
    d: "M8.5 16.5a5 5 0 0 1 7 0",
    key: "sej527"
}], ["path", {
    d: "M2 8.82a15 15 0 0 1 4.17-2.65",
    key: "11utq1"
}], ["path", {
    d: "M10.66 5c4.01-.36 8.14.9 11.34 3.76",
    key: "hxefdu"
}], ["path", {
    d: "M16.85 11.25a10 10 0 0 1 2.22 1.68",
    key: "q734kn"
}], ["path", {
    d: "M5 13a10 10 0 0 1 5.24-2.76",
    key: "piq4yl"
}], ["line", {
    x1: "12",
    x2: "12.01",
    y1: "20",
    y2: "20",
    key: "of4bc4"
}]])
  , se = typeof window < "u" ? u.useLayoutEffect : u.useEffect;
function re(e, t, n) {
    const o = u.useRef(t);
    se( () => {
        o.current = t
    }
    , [t]),
    u.useEffect( () => {
        const l = (n == null ? void 0 : n.current) || window;
        if (!(l && l.addEventListener))
            return;
        const p = c => o.current(c);
        return l.addEventListener(e, p),
        () => {
            l.removeEventListener(e, p)
        }
    }
    , [e, n])
}
function ne(e, t, n=["mousedown"]) {
    re(n, o => {
        const l = e == null ? void 0 : e.current;
        !l || l.contains(o.target) || t(o)
    }
    )
}
const oe = ({data: e}) => {
    var o, l;
    let t = "/not-found"
      , n = "";
    return (e == null ? void 0 : e.type) === "movie" ? (t = `/movies/${e.id}`,
    n = I(e.id, e == null ? void 0 : e.poster_path, "movie", "poster", 300)) : (e == null ? void 0 : e.type) === "tv" ? (t = `/tv-shows/${e.id}`,
    n = I(e.id, e == null ? void 0 : e.poster_path, "tv", "poster", 300)) : (e == null ? void 0 : e.type) === "live" && (t = `/play?type=live&id=${e == null ? void 0 : e.id}`,
    n = `/static/tv-logos/${e == null ? void 0 : e.logo}`),
    s.jsxs(b, {
        to: t,
        className: "mb-2 flex gap-2 md:gap-3 w-full items-center p-2 rounded-sm bg-white/5",
        children: [s.jsx(_, {
            src: `${n}?id=${e == null ? void 0 : e.id}`,
            poster: e == null ? void 0 : e.poster_path,
            alt: e == null ? void 0 : e.title,
            className: "w-12 md:w-16 rounded-sm"
        }), s.jsxs("div", {
            className: "flex-grow",
            children: [s.jsx("p", {
                className: "text-base md:text-lg font-medium tracking-wide mb-1",
                children: e == null ? void 0 : e.title
            }), s.jsxs("div", {
                className: "flex gap-1 flex-wrap",
                children: [(o = e == null ? void 0 : e.Library) != null && o.name ? s.jsx("span", {
                    className: "inline-block px-2 py-1 font-medium tracking-wider rounded-md bg-white/5 text-xs",
                    children: (l = e == null ? void 0 : e.Library) == null ? void 0 : l.name
                }) : null, e != null && e.year ? s.jsx("span", {
                    className: "inline-block px-2 py-1 font-medium tracking-wider rounded-md bg-white/5 text-xs",
                    children: e == null ? void 0 : e.year
                }) : null, s.jsxs("span", {
                    className: "px-2 py-1 font-medium tracking-wider rounded-md bg-white/5 text-xs capitalize inline-flex items-center gap-1",
                    children: [(e == null ? void 0 : e.type) === "live" ? s.jsx(ee, {
                        color: "red"
                    }) : null, " ", e == null ? void 0 : e.type]
                })]
            })]
        })]
    })
}
  , te = ({handleClose: e}) => {
    const t = u.useRef(null)
      , n = F()
      , [o,l] = u.useState("");
    function p(i) {
        var d;
        l((d = i == null ? void 0 : i.target) == null ? void 0 : d.value)
    }
    ne(t, e);
    const {data: c, isLoading: w, error: g} = j({
        search: o
    }, async ({search: i}) => {
        try {
            if (!i)
                return [];
            const {data: d} = await v.get("/search", {
                params: {
                    search: i
                }
            });
            return d
        } catch (d) {
            throw N(d)
        }
    }
    , {
        revalidateOnFocus: !1,
        shouldRetryOnError: !1,
        keepPreviousData: !1
    });
    function x(i) {
        i.preventDefault(),
        n(`/search?search=${o}`),
        e()
    }
    return s.jsxs("section", {
        className: "fixed top-14 right-3 md:right-6 lg:right-10 xl:right-14 w-[calc(100%-1.5rem)] md:max-w-xs h-auto z-[100000] rounded-sm overflow-hidden shadow-2xl shadow-dark ",
        ref: t,
        children: [s.jsxs("form", {
            onSubmit: x,
            className: " bg-gradient-to-tr from-dark/75 to-dark/10 border-2 border-indigo-300/60 rounded-md backdrop-blur-2xl backdrop-saturate-150 p-2 md:p-3 max-w-full flex gap-2 justify-between items-center flex-row w-full",
            children: [s.jsx("input", {
                type: "text",
                alt: "search box",
                placeholder: "Search ...",
                autoFocus: !0,
                "aria-autocomplete": "false",
                onChange: p,
                className: "caret-white placeholder:text-white/50 text-white rounded-md px-2 flex-grow bg-transparent outline-none h-full font-medium tracking-wider text-lg "
            }), s.jsx(h.IconButton, {
                variant: "text",
                className: "text-white",
                type: "submit",
                children: s.jsx(H, {
                    size: 22
                })
            })]
        }), o && (c != null && c.length) ? s.jsxs("div", {
            className: " bg-dark/90 backdrop-blur-md backdrop-saturate-150 backdrop-grayscale pb-3",
            children: [s.jsxs("div", {
                className: "p-2 md:p-3 h-4/5 max-h-96 overflow-y-auto",
                children: [w && s.jsx("div", {
                    className: "py-3 flex justify-center items-center",
                    children: s.jsx(U, {
                        size: 40
                    })
                }), g && !w && s.jsx(h.Alert, {
                    color: "red",
                    variant: "gradient",
                    className: "my-4",
                    children: g
                }), Array.isArray(c) && (c == null ? void 0 : c.map(i => s.jsx(oe, {
                    data: i
                }, (i == null ? void 0 : i.id) + "key")))]
            }), s.jsx(h.IconButton, {
                onClick: e,
                variant: "outlined",
                className: "rounded-full border-white border-2 h-20 w-20 block mx-auto mt-3",
                children: s.jsx(O, {
                    size: 24,
                    fontSize: 24,
                    color: "white"
                })
            })]
        }) : null]
    })
}
;
async function le() {
    try {
        const {data: e} = await v.get("/menus");
        return e
    } catch (e) {
        throw N(e)
    }
}
async function ie() {
    try {
        const {data: e} = await P.get(`/menus.json?t=${new Date}`);
        return e
    } catch (e) {
        throw N(e)
    }
}
function ye() {
    var L, E, M, S, z, C;
    const [e,t] = u.useState((window == null ? void 0 : window.scrollY) > 50)
      , {data: n} = j("/menu", le)
      , {data: o} = j("/local-menu", ie)
      , [l,p] = m.useState(!1)
      , {pathname: c} = W()
      , w = [{
        name: "Home",
        icon: s.jsx(Z, {}),
        route: "/"
    }, {
        name: "Movies",
        route: "/movies",
        icon: s.jsx(K, {}),
        menus: (E = (L = n == null ? void 0 : n.categories) == null ? void 0 : L.movie) != null && E.length ? (M = n == null ? void 0 : n.categories) == null ? void 0 : M.movie : null
    }, {
        name: "Tv Shows",
        route: "/tv-shows",
        icon: s.jsx(X, {}),
        menus: (z = (S = n == null ? void 0 : n.categories) == null ? void 0 : S.tv) != null && z.length ? (C = n == null ? void 0 : n.categories) == null ? void 0 : C.tv : null
    }, {
        name: "Apps",
        icon: s.jsx(Q, {}),
        route: "/apps"
    }, {
        name: "Report",
        icon: s.jsx(V, {}),
        route: "/report",
        hidden: !0
    }, ...Array.isArray(o == null ? void 0 : o.main_menu) ? (o == null ? void 0 : o.main_menu) || [] : []];
    console.log(o);
    const [g,x] = m.useState(!1)
      , i = ["/signin", "/signup", "/play"];
    if (m.useEffect( () => {
        window.addEventListener("resize", () => window.innerWidth >= 960 && x(!1))
    }
    , []),
    m.useEffect( () => {
        window.addEventListener("scroll", () => {
            const r = window.scrollY > 50;
            r !== e && t(r)
        }
        )
    }
    , [e]),
    m.useEffect( () => {
        const r = Y(`${v.getUri()}browsing_users_room`);
        return () => {
            r.disconnect()
        }
    }
    , []),
    m.useEffect( () => {
        x(!1);
        try {
            window.scrollTo(0, 0)
        } catch (r) {
            R(r)
        }
    }
    , [c]),
    i.includes(c))
        return null;
    const d = s.jsx("ul", {
        className: "mb-4 mt-2 block md:flex flex-col items-start gap-2 lg:mb-0 lg:mt-0 lg:flex-row lg:items-center lg:gap-6 md:mx-auto text-[16px] justify-center",
        children: w.filter(r => !r.hidden).map( (r, q) => {
            var $;
            return s.jsxs("div", {
                className: "relative group",
                children: [r != null && r.route || r != null && r.url ? r != null && r.route ? s.jsxs(T, {
                    to: r.route,
                    className: "items-center rounded-md flex md:inline-flex px-2 md:px-0 py-1 md:py-0 bg-white/5 md:bg-transparent mb-1 md:mb-0",
                    children: [(r == null ? void 0 : r.icon) || s.jsx(k, {
                        className: "size-5"
                    }), s.jsx(h.Typography, {
                        as: "li",
                        className: "p-1 font-[600] tracking-wider flex-grow",
                        children: r == null ? void 0 : r.name
                    })]
                }) : s.jsxs("a", {
                    href: r.url,
                    target: "_blank",
                    rel: "noopener noreferrer",
                    className: "items-center rounded-md flex md:inline-flex px-2 md:px-0 py-1 md:py-0 bg-white/5 md:bg-transparent mb-1 md:mb-0",
                    children: [r.icon || s.jsx(k, {
                        className: "size-5"
                    }), s.jsx(h.Typography, {
                        as: "li",
                        className: "p-1 font-[600] tracking-wider flex-grow",
                        children: r.name
                    })]
                }) : s.jsxs("a", {
                    className: "cursor-n-resize items-center rounded-md flex md:inline-flex px-2 md:px-0 py-1 md:py-0 bg-white/5 md:bg-transparent mb-1 md:mb-0",
                    children: [r.icon || s.jsx(k, {
                        className: "size-5"
                    }), s.jsx(h.Typography, {
                        as: "li",
                        className: "p-1 font-[600] tracking-wider flex-grow",
                        children: r.name
                    })]
                }), Array.isArray(r == null ? void 0 : r.menus) && s.jsx("ul", {
                    className: "relative md:absolute top-full left-0 duration-500 ease-in-out md:opacity-0 group-hover:opacity-100 md:invisible md:group-hover:visible z-[100] bg-dark  mb-2 ml-3 md:ml-0 md:min-w-52",
                    children: s.jsx("div", {
                        className: "p-1 rounded-sm border-2 border-white/20 md:shadow-lg md:shadow-dark",
                        children: ($ = r == null ? void 0 : r.menus) == null ? void 0 : $.filter(a => !(a != null && a.hidden)).map( (a, B) => s.jsx("li", {
                            children: a.url ? s.jsxs("a", {
                                href: a == null ? void 0 : a.url,
                                target: "_blank",
                                rel: "noopener noreferrer",
                                className: "px-2 py-1 flex items-center gap-1 mb-1 w-full min-w-max  group/list text-white/80 hover:text-white",
                                children: [s.jsx("span", {
                                    className: " h-[3px] rounded-md duration-200 ease-in-out w-0 bg-primary group-hover/list:w-6"
                                }), " ", s.jsx("span", {
                                    className: "flex-grow",
                                    children: a == null ? void 0 : a.name
                                }), s.jsx(J, {
                                    size: 14
                                })]
                            }) : s.jsxs(b, {
                                to: `${r.route}?category=${a.id}`,
                                className: "px-2 py-1 flex items-center gap-1 mb-1 w-full min-w-max  group/list text-white/80 hover:text-white",
                                children: [s.jsx("span", {
                                    className: " h-[3px] rounded-md duration-200 ease-in-out w-0 bg-primary group-hover/list:w-6"
                                }), " ", s.jsx("span", {
                                    className: "flex-grow",
                                    children: a == null ? void 0 : a.name
                                })]
                            })
                        }, B))
                    })
                })]
            }, q)
        }
        )
    });
    return s.jsxs(s.Fragment, {
        children: [s.jsxs(h.Drawer, {
            open: g,
            onClose: () => x(!1),
            className: "p-4 bg-dark lg:hidden z-[1000000000000] overflow-y-auto",
            children: [s.jsxs("div", {
                className: "mb-6 flex items-center justify-between",
                children: [s.jsx(b, {
                    to: "/",
                    variant: "h5",
                    color: "white",
                    children: s.jsx("img", {
                        src: y.logo,
                        className: A("logo header-logo", y.logo_class || "w-28")
                    })
                }), s.jsx(h.IconButton, {
                    variant: "text",
                    color: "blue-gray",
                    onClick: () => x(!1),
                    children: s.jsx("svg", {
                        xmlns: "http://www.w3.org/2000/svg",
                        fill: "none",
                        viewBox: "0 0 24 24",
                        strokeWidth: 2,
                        stroke: "currentColor",
                        className: "h-5 w-5",
                        children: s.jsx("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            d: "M6 18L18 6M6 6l12 12"
                        })
                    })
                })]
            }), s.jsx("div", {
                className: "flex gap-2 flex-col",
                children: d
            })]
        }), s.jsx(h.Navbar, {
            className: D("fixed top-0 h-max rounded-none py-3 bg-opacity-0 !backdrop-filter-none shadow-none border-0 container z-[10000]", e ? "!bg-dark-light bg-opacity-100 shadow-sm shadow-dark" : "bg-gradient-to-b from-black to-transparent"),
            children: s.jsxs(G.div, {
                initial: {
                    opacity: 0,
                    y: -50
                },
                animate: {
                    opacity: 1,
                    y: 0
                },
                className: "flex items-center justify-between text-white",
                children: [s.jsx(h.IconButton, {
                    variant: "text",
                    className: " h-6 w-6 text-inherit hover:bg-transparent focus:bg-transparent active:bg-transparent lg:hidden",
                    ripple: !1,
                    onClick: () => x(r => !r),
                    children: g ? s.jsx("svg", {
                        xmlns: "http://www.w3.org/2000/svg",
                        fill: "none",
                        className: "h-6 w-6",
                        viewBox: "0 0 24 24",
                        stroke: "currentColor",
                        strokeWidth: 2,
                        children: s.jsx("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            d: "M6 18L18 6M6 6l12 12"
                        })
                    }) : s.jsx("svg", {
                        xmlns: "http://www.w3.org/2000/svg",
                        className: "h-6 w-6",
                        fill: "none",
                        stroke: "currentColor",
                        strokeWidth: 2,
                        children: s.jsx("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            d: "M4 6h16M4 12h16M4 18h16"
                        })
                    })
                }), s.jsx(b, {
                    to: "/",
                    children: s.jsx("img", {
                        src: y.logo,
                        className: A(y.logo_class || "w-28")
                    })
                }), s.jsx("div", {
                    className: "hidden lg:flex items-center gap-4 mx-auto",
                    children: s.jsx("div", {
                        className: "hidden lg:block mx-auto lg:flex-grow",
                        children: d
                    })
                }), s.jsx("div", {
                    className: "flex items-center gap-4",
                    children: s.jsx(h.IconButton, {
                        variant: "filled",
                        className: "bg-white/10 border-2 border-white/10 ml-auto text-inherit hover:bg-transparent focus:bg-transparent active:bg-transparent",
                        onClick: () => p(r => !r),
                        children: l ? s.jsx(O, {}) : s.jsx(H, {})
                    })
                })]
            })
        }), l && s.jsx(te, {
            handleClose: () => p(!1)
        })]
    })
}
export {ye as Header, ye as default};
